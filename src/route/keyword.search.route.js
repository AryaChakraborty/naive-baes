const express = require("express");
const Router = express.Router();
const user = require("../model/user.model");
const axios = require("axios");

Router.route("/keywordSearch")
    .get(async (req, res) => {

        let keywordList = [
            'reject',
            'withdraw',
            'dealer',
            'hindu',
            'collector',
            'inform',
            'annexure-12',
            'irretrievable',
            'stab',
            'principal',
            'intention',
            'section-is',
            'limit',
            'terms',
            'section-68-a',
            'interim',
            'section-109',
            'saving',
            'provisional',
            'section-1',
            'subject',
            'opportunity',
            'section-69',
            'manner',
            'article-227',
            'high',
            'original',
            'profession',
            'equipment',
            'section-7',
            'article-30',
            'valuation',
            'terminate',
            'long',
            'tune',
            'section-43',
            'parking',
            'lead',
            'abuse',
            'indication',
            'section-48',
            'severe',
            'insure',
            'minister',
            'tenant',
            'remove',
            'death',
            'temper',
            'remedy',
            'section-21',
            'krishna',
            'findings',
            'connection',
            'section-32',
            'spot',
            'sue',
            'weightage',
            'effect',
            'section-80',
            'wages',
            'mention',
            'signature',
            'constitution',
            'decree',
            'plot',
            'conduct',
            'disputes',
            'draw',
            'duty',
            'council',
            'assembly',
            'present',
            'unit',
            'favor',
            'wide',
            'period',
            'swear',
            'modify',
            'nail',
            'propounders',
            'cash',
            'sect',
            'section-115',
            'enhanced',
            'assessment',
            'prevalent',
            'travel',
            'section-onward',
            'section-157',
            'offer',
            'depart',
            'penalty',
            'real',
            'recover',
            'security',
            'tea',
            'claim',
            'section-may',
            'motor',
            'daily',
            'section-170',
            'idol',
            'ban',
            'communicate',
            'annexure-.',
            'moment',
            'annexure-(',
            'restriction',
            'human',
            'und',
            'city',
            'diversity',
            'data',
            'poin',
            'years',
            'die',
            'section-71',
            'informant',
            'legislature',
            'university',
            'bills',
            'respondent',
            'unauthorized',
            'require',
            'view',
            'fur',
            'locate',
            'sight',
            'son',
            'establish',
            'false',
            'belief',
            'creditors',
            'behalf',
            'commit',
            'urge',
            'syil',
            'batch',
            'ctcs',
            'migration',
            'section-25f',
            'marked',
            'termination',
            'tie',
            'step',
            'paper',
            'sections',
            'mental',
            'respect',
            'partial',
            'harm',
            'academic',
            'payment',
            'mimi',
            'section-28',
            'secret',
            'resolution',
            'reduction',
            'hemp',
            'garden',
            'vanish',
            'ballot',
            'induce',
            'canal',
            'finance',
            'cat',
            'chancellor',
            'article-226.',
            'month',
            'centre',
            'section-343/344',
            'penis',
            'utter',
            'rode',
            'section-33',
            'status',
            'jubilee',
            'sanctioned',
            'hundred',
            'action',
            'retire',
            'section-42',
            'filling',
            'lazy',
            'submitted',
            'red',
            'car',
            'section-except',
            'dish',
            'annexure-p-6',
            'plots',
            'property',
            'bureaucracy',
            'section-89',
            'custom',
            'facts',
            'mob',
            'proposal',
            'section-173',
            'physics',
            'pond',
            'workman',
            'section-45',
            'civil',
            'class',
            'cut',
            'board',
            'hearing',
            'subordinate',
            'wireman',
            'tax',
            'shive',
            'probe',
            'tribunal',
            'round',
            'applications',
            'section-20',
            'tendency',
            'col',
            'proof',
            'licensed',
            'anti',
            'neck',
            'man',
            'fine',
            'ram',
            'russian',
            'ver',
            'section-13-',
            'ward',
            'finally',
            'special',
            'visual',
            'condition',
            'section-54',
            'cab',
            'ground',
            'private',
            'ten',
            'accept',
            'render',
            'india',
            'preference',
            'film',
            'manual',
            'sick',
            'section-57',
            'official',
            'job',
            'student',
            'care',
            'dust',
            'routine',
            'direct',
            'transferee',
            'correct',
            'affidavits',
            'suffer',
            'casual',
            'alive',
            'workmen',
            'national',
            'dispute',
            'monthly',
            'circumstance',
            'radio',
            'ccoappeal',
            'participate',
            'laboratory',
            'vote',
            'union',
            'section-26',
            'observe',
            'employment',
            'wise',
            'corporate',
            'commercial',
            "annexure-'",
            'position',
            'late',
            'section-381',
            'january',
            'run',
            'charge',
            'annexure-4',
            'kalyani',
            'regulation',
            'lecture',
            'article-e',
            'promo',
            'allotment',
            'put',
            'section-58',
            'rib',
            'assassination',
            'section-8.',
            'provision',
            'quarter',
            'induction',
            'sam',
            'amend',
            'observation',
            'compassionate',
            'embargo',
            'rico',
            'reserve',
            'writ',
            'owner',
            'section-25g',
            'punishment',
            'great',
            'public',
            'family',
            'cheat',
            'rohilla',
            'plaintiff',
            'coordinate',
            'prior',
            'left',
            'granted',
            'wound',
            'arabia',
            'portion',
            'bachelor',
            'section-vests',
            'filed',
            'delivery',
            'suit',
            'article-213',
            'section-and',
            'licence',
            'section-36',
            'fact',
            'child',
            'section-446',
            'punish',
            'exercise',
            'amber',
            'oil',
            'pro',
            'negligence',
            'note',
            'occupy',
            'bench',
            'salary',
            'good',
            'fund',
            'section-293',
            'mortgage',
            'debt',
            'transferor',
            'governance',
            'fighter',
            'section-53',
            'liquide',
            'seat',
            'investigation',
            'servant',
            'section-the',
            'bus',
            'court',
            'adopt',
            'repeal',
            'error',
            'prove',
            'disciplinary',
            'expert',
            'tooth',
            'corporation',
            'letter',
            'department',
            'persons',
            'section-68-b',
            'point',
            'article-309',
            'freedom',
            'plan',
            'minor',
            'test',
            'focus',
            'aano',
            'drawn',
            'industrial',
            'vendor',
            'amount',
            'fit',
            'examine',
            'reason',
            'proper',
            'trade',
            'shop',
            'express',
            'section-25h',
            'rfa',
            'section-will',
            'section-140',
            'submit',
            'legal',
            'prop',
            'calculate',
            'section-170.',
            'clean',
            'simple',
            'sample',
            'airways',
            'nation',
            'result',
            'member',
            'close',
            'section',
            'rely',
            'sare',
            'frame',
            'prohibit',
            'section-37',
            'medical',
            'cent',
            'section-39',
            'power',
            'sheet',
            'section-347-e',
            'resin',
            'health',
            'ton',
            'profit',
            'additional',
            'manager',
            'certificate',
            'facility',
            'section-15',
            'outfit',
            'secretariat',
            'low',
            'gujarat',
            'appeal',
            'standing',
            'performance',
            'press',
            'training',
            'normal',
            'file',
            'section-4',
            'administrative',
            'armed',
            'teacher',
            'meme',
            'endowment',
            'aggregate',
            'designate',
            'cancel',
            'receipt',
            'article-16',
            'witness',
            'early',
            'company',
            'recommendation',
            'pains',
            'justify',
            'regional',
            'section-25',
            'refer',
            'initial',
            'belong',
            'useless',
            'section-25j',
            'havoc',
            'review',
            'dependent',
            'annexure-p-2',
            'roman',
            'list',
            'article-166',
            'courts',
            'faith',
            'article-58',
            'ratio',
            'regulatory',
            'checking',
            'adjust',
            'item',
            'permanent',
            'chair',
            'coma',
            'construct',
            'year',
            'surgeon',
            'opposite',
            'pleading',
            'section-234cof',
            'reasonable',
            'elect',
            'send',
            'bind',
            'section-66',
            'harness',
            'punitive',
            'clauses',
            'dem',
            'birth',
            'misconduct',
            'mason',
            'regular',
            'cite',
            'abp',
            'hit',
            'gazette',
            'damages',
            'inside',
            'short',
            'custody',
            'delhi',
            'entertain',
            'inspect',
            'fee',
            'rest',
            'appointment',
            'marks',
            'exemption',
            'october',
            'compass',
            'settlement',
            'section-,',
            'pleadings',
            'situation',
            'college',
            'guard',
            'airport',
            'prescribe',
            'bank',
            'euros',
            'vol',
            'meet',
            'discretion',
            'weak',
            'affect',
            'rep',
            'cost',
            'services',
            'section-officer',
            'include',
            'summons',
            'package',
            'section-106',
            'widow',
            'claims',
            'answer',
            'section-302',
            'seal',
            'notice',
            'section-56',
            'door',
            'vacant',
            'seton',
            'suspend',
            'permit',
            'leadership',
            'wpc',
            'inspection',
            'section-234-c',
            'love',
            'thing',
            'satisfied',
            'remain',
            'section-143',
            'instant',
            'explain',
            'section-that',
            'seizure',
            'lock',
            'manage',
            'article-226',
            'construction',
            'iii',
            'chemistry',
            'prepare',
            'slip',
            'vest',
            'section-of',
            'men',
            'minimum',
            'demand',
            'technical',
            'foundation',
            'ride',
            'section-35',
            'engineer',
            'burn',
            'dated',
            'arrange',
            'section-65',
            'telecom',
            'circle',
            'generation',
            'show',
            'information',
            'tender',
            'middle',
            'leave'
        ]

        // let config = {
        //     method: 'get',
        //     url: 'http://35.90.190.108/autocomplete',
        //     headers: {
        //         'Content-Type': 'application/json'
        //     }
        // };
        // await axios(config)
        //     .then(function (response) {

        //         keywordList = response.data;


        //     })
        //     .catch(function (error) {
        //         console.log(error);
        //     });

        res.status(200).render("keywordsearch.ejs", {
            "keywordList": keywordList
        });
    })

    .post(async (req, res) => {
        let caseSearch = req.body.caseSearch;
        let pdfNumber = req.body.number;

        caseSearch = '{"key":' + caseSearch + '}'
        caseSearch = JSON.parse(caseSearch)['key'];
        let skeys = [];
        for (let i of caseSearch) {
            skeys.push(i.value);
        }

        let data = JSON.stringify({
            "search_key": skeys,
            "top": Number(pdfNumber) || 10,
            "order_matters": false
        });

        let config = {
            method: 'post',
            url: 'http://35.90.190.108/search',
            headers: {
                'Content-Type': 'application/json'
            },
            data: data
        };

        return axios(config)
            .then(function (response) {

                let docs = response.data["docs"];

                res.render("keywordResult.ejs",
                    {
                        "docs": docs,
                        "skeys": skeys
                    }
                );
            })
            .catch(function (error) {
                console.log(error);
            });
    })


module.exports = Router;